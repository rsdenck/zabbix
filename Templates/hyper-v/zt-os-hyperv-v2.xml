<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>3.4</version>
    <date>2018-06-14T08:07:59Z</date>
    <groups>
        <group>
            <name>Templates/Virtualization</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template Microsoft Hyper-V Host</template>
            <name>Template Microsoft Hyper-V Host (itmicus.ru)</name>
            <description>Template Microsoft Hyper-V Host (itmicus) Version: 1.0&#13;
&#13;
Template for monitoring node from Microsoft Failover cluster with Hyper-V role or standalone Hyper-V.&#13;
&#13;
&#13;
Read this before:&#13;
&#13;
Main concept&#13;
https://blogs.msdn.microsoft.com/tvoellm/2009/04/22/monitoring-hyper-v-performance/&#13;
&#13;
CPU&#13;
https://blogs.technet.microsoft.com/neales/2016/10/24/hyper-v-performance-cpu/&#13;
&#13;
Memory&#13;
https://blogs.technet.microsoft.com/neales/2016/11/22/hyper-v-performance-memory/&#13;
&#13;
Performance&#13;
https://docs.microsoft.com/en-us/windows-server/administration/performance-tuning/role/hyper-v-server/detecting-virtualized-environment-bottlenecks&#13;
&#13;
WMI classes&#13;
http://wutils.com/wmi/root/cimv2/win32_perfrawdata/</description>
            <groups>
                <group>
                    <name>Templates/Virtualization</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Hyper-V Host</name>
                </application>
                <application>
                    <name>Hyper-V Host CPU</name>
                </application>
                <application>
                    <name>Hyper-V Host Memory</name>
                </application>
                <application>
                    <name>Hyper-V Host Network Adapter</name>
                </application>
                <application>
                    <name>Hyper-V Host overview</name>
                </application>
                <application>
                    <name>Hyper-V Host Status</name>
                </application>
                <application>
                    <name>Hyper-V Host Virtual Switch</name>
                </application>
                <application>
                    <name>Hyper-V Host VM</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Hyper-V Host statistics</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.host[get,host_stat,all]</key>
                    <delay>10m</delay>
                    <history>90d</history>
                    <trends>0</trends>
                    <status>0</status>
                    <value_type>4</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>Get statistics from PowerShell script</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host Status</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Root memory assigned</name>
                    <type>15</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.rootassignedmemory</key>
                    <delay>10m</delay>
                    <history>90d</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>B</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params>last(&quot;wmi.get[root\cimv2,select TotalPhysicalMemory from Win32_ComputerSystem]&quot;)-last(&quot;hyperv.hv.vmsassignedmemory&quot;)-last(&quot;wmi.get[root\cimv2,select FreePhysicalMemory from Win32_OperatingSystem]&quot;)</params>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host Memory</name>
                        </application>
                        <application>
                            <name>Hyper-V Host overview</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>VMs Physical Memory demand</name>
                    <type>18</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.stat.vmsmemorydemand</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>B</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>Memory is need for VMs</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host Memory</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing>
                        <step>
                            <type>12</type>
                            <params>$.VMsMemoryDemand</params>
                        </step>
                    </preprocessing>
                    <jmx_endpoint/>
                    <master_item>
                        <key>hyperv.host[get,host_stat,all]</key>
                    </master_item>
                </item>
                <item>
                    <name>VMs Physical Memory maximum</name>
                    <type>18</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.stat.vmsmemorymaximum</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>B</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host Memory</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing>
                        <step>
                            <type>12</type>
                            <params>$.VMsMemoryMaximum</params>
                        </step>
                    </preprocessing>
                    <jmx_endpoint/>
                    <master_item>
                        <key>hyperv.host[get,host_stat,all]</key>
                    </master_item>
                </item>
                <item>
                    <name>VMs Physical Memory minimum</name>
                    <type>18</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.stat.vmsmemoryminimum</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>B</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host Memory</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing>
                        <step>
                            <type>12</type>
                            <params>$.VMsMemoryMinimum</params>
                        </step>
                    </preprocessing>
                    <jmx_endpoint/>
                    <master_item>
                        <key>hyperv.host[get,host_stat,all]</key>
                    </master_item>
                </item>
                <item>
                    <name>VMs State Off</name>
                    <type>18</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.stat.vmsstateoff</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing>
                        <step>
                            <type>12</type>
                            <params>$.VMsStateOff</params>
                        </step>
                    </preprocessing>
                    <jmx_endpoint/>
                    <master_item>
                        <key>hyperv.host[get,host_stat,all]</key>
                    </master_item>
                </item>
                <item>
                    <name>VMs State Other</name>
                    <type>18</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.stat.vmsstateother</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing>
                        <step>
                            <type>12</type>
                            <params>$.VMsStateOther</params>
                        </step>
                    </preprocessing>
                    <jmx_endpoint/>
                    <master_item>
                        <key>hyperv.host[get,host_stat,all]</key>
                    </master_item>
                </item>
                <item>
                    <name>VMs State Paused</name>
                    <type>18</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.stat.vmsstatepaused</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing>
                        <step>
                            <type>12</type>
                            <params>$.VMsStatePaused</params>
                        </step>
                    </preprocessing>
                    <jmx_endpoint/>
                    <master_item>
                        <key>hyperv.host[get,host_stat,all]</key>
                    </master_item>
                </item>
                <item>
                    <name>VMs State Running</name>
                    <type>18</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.stat.vmsstaterunning</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing>
                        <step>
                            <type>12</type>
                            <params>$.VMsStateRunning</params>
                        </step>
                    </preprocessing>
                    <jmx_endpoint/>
                    <master_item>
                        <key>hyperv.host[get,host_stat,all]</key>
                    </master_item>
                </item>
                <item>
                    <name>VMs State Saved</name>
                    <type>18</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.stat.vmsstatesaved</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing>
                        <step>
                            <type>12</type>
                            <params>$.VMsStateSaved</params>
                        </step>
                    </preprocessing>
                    <jmx_endpoint/>
                    <master_item>
                        <key>hyperv.host[get,host_stat,all]</key>
                    </master_item>
                </item>
                <item>
                    <name>Hyper-V Host total physical memory</name>
                    <type>15</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.TotalPhysicalMemory</key>
                    <delay>10m</delay>
                    <history>90d</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>B</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params>last(&quot;wmi.get[root\cimv2,select TotalPhysicalMemory from Win32_ComputerSystem]&quot;)</params>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host Memory</name>
                        </application>
                        <application>
                            <name>Hyper-V Host overview</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V vCPU ratio</name>
                    <type>15</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.vcpuratio</key>
                    <delay>1h</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>0</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params>last(&quot;wmi.get[root\cimv2, select VirtualProcessors FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorPartition]&quot;)/last(&quot;wmi.get[root\cimv2, select LogicalProcessors FROM Win32_PerfFormattedData_HvStats_HyperVHypervisor]&quot;)</params>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                        <application>
                            <name>Hyper-V Host overview</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>VMs Physical Memory assigned</name>
                    <type>15</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.vmsassignedmemory</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>B</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params>last(&quot;wmi.get[root\cimv2, select PhysicalPagesAllocated FROM Win32_PerfFormattedData_VidPerfProvider_HyperVVMVidPartition WHERE Name='_Total']&quot;)*4K</params>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>Physical Memory Assigned</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host Memory</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>VMs used physical memory  %</name>
                    <type>15</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.vmsmemorypercent</key>
                    <delay>10m</delay>
                    <history>90d</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>0</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params>(last(&quot;hyperv.hv.vmsassignedmemory&quot;) * 100) / last(&quot;wmi.get[root\cimv2,select TotalPhysicalMemory from Win32_ComputerSystem]&quot;)</params>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host Memory</name>
                        </application>
                        <application>
                            <name>Hyper-V Host overview</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>VMs Online</name>
                    <type>15</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.hv.vmsonline</key>
                    <delay>10m</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params>last(&quot;wmi.get[root\cimv2, select Partitions FROM Win32_PerfFormattedData_HvStats_HyperVHypervisor]&quot;) -1</params>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Virtual Machine Management service</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>service_state[vmms]</key>
                    <delay>30s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host overview</name>
                        </application>
                        <application>
                            <name>Hyper-V Host Status</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>Windows service state</name>
                    </valuemap>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Dynamic Memory Balancer Available Memory</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select AvailableMemory FROM Win32_PerfFormattedData_BalancerStats_HyperVDynamicMemoryBalancer]</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>B</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>This counter represents the amount of memory left on the node.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host Memory</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing>
                        <step>
                            <type>1</type>
                            <params>1048576</params>
                        </step>
                    </preprocessing>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Logical CPU Context Switching /sec</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select ContextSwitchesPersec FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorLogicalProcessor]</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The rate of virtual processor context switches on the processor.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>VMs Health Critical</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select HealthCritical FROM Win32_PerfFormattedData_VmmsVirtualMachineStats_HyperVVirtualMachineHealthSummary]</key>
                    <delay>1m</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>This counter represents the number of virtual machines with critical health.&#13;
&#13;
http://wutils.com/wmi/root/cimv2/win32_perfrawdata_vmmsvirtualmachinestats_hypervvirtualmachinehealthsummary/</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host</name>
                        </application>
                        <application>
                            <name>Hyper-V Host overview</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>VMs Health Ok</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select HealthOk FROM Win32_PerfFormattedData_VmmsVirtualMachineStats_HyperVVirtualMachineHealthSummary]</key>
                    <delay>1m</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>'This counter represents the number of virtual machines with ok health.'&#13;
&#13;
http://wutils.com/wmi/root/cimv2/win32_perfrawdata_vmmsvirtualmachinestats_hypervvirtualmachinehealthsummary/</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host</name>
                        </application>
                        <application>
                            <name>Hyper-V Host overview</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Logical Processors</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select LogicalProcessors FROM Win32_PerfFormattedData_HvStats_HyperVHypervisor]</key>
                    <delay>6h</delay>
                    <history>3d</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of logical processors present in the system.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V VMs count</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select Partitions FROM Win32_PerfFormattedData_HvStats_HyperVHypervisor]</key>
                    <delay>1h</delay>
                    <history>3d</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of partitions (virtual machines) present in the system.&#13;
  Partitions – Each virtual machine on the system is run in a container called a partition.   If you have no VM’s running this value will be set to 1 because the “host OS” called the “root” in Hyper-V is also running in a partition.  So if you have 2 guest VM’s running this value will be 3.  +1 for each guest and +1 for the root.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host</name>
                        </application>
                        <application>
                            <name>Hyper-V Host overview</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Logical CPU Guest Runtime %</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PercentGuestRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorLogicalProcessor WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The percentage of time spent by the processor in guest code</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                        <application>
                            <name>Hyper-V Host overview</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Root CPU Guest Runtime %</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PercentGuestRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorRootVirtualProcessor WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The percentage of time spent by the virtual processor in guest code.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Virtual CPU Guest Runtime %</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PercentGuestRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorVirtualProcessor WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The percentage of time spent by the virtual processor in guest code.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Logical CPU Hypervisor Runtime %</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PercentHypervisorRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorLogicalProcessor WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The percentage of time spent by the processor in hypervisor code</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Root CPU Hypervisor Runtime %</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PercentHypervisorRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorRootVirtualProcessor WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The percentage of time spent by the virtual processor in hypervisor code.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Virtual CPU Hypervisor Runtime %</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PercentHypervisorRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorVirtualProcessor WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The percentage of time spent by the virtual processor in hypervisor code.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Logical CPU Idle Runtime %</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PercentIdleTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorLogicalProcessor WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The percentage of time spent by the processor in an idle state.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Root CPU Remote Runtime %</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PercentRemoteRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorRootVirtualProcessor WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The percentage of time spent by the virtual processor running on a remote node.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Virtual CPU Remote Runtime %</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PercentRemoteRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorVirtualProcessor WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The percentage of time spent by the virtual processor running on a remote node.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Logical CPU Total Runtime %</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PercentTotalRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorLogicalProcessor WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The percentage of time spent by the processor in guest code</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                        <application>
                            <name>Hyper-V Host overview</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Root CPU Total Runtime %</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PercentTotalRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorRootVirtualProcessor WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The percentage of time spent by the virtual processor in guest and hypervisor code.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Virtual CPU Total Runtime %</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PercentTotalRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorVirtualProcessor WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units>%</units>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The percentage of time spent by the virtual processor in guest and hypervisor code.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V VMs Physical Pages Allocated</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select PhysicalPagesAllocated FROM Win32_PerfFormattedData_VidPerfProvider_HyperVVMVidPartition WHERE Name='_Total']</key>
                    <delay>15s</delay>
                    <history>1w</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of physical pages allocated. Pages = 4Kb</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host Memory</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
                <item>
                    <name>Hyper-V Virtual Processors</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>wmi.get[root\cimv2, select VirtualProcessors FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorPartition]</key>
                    <delay>1h</delay>
                    <history>3d</history>
                    <trends>365d</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of virtual processors present in the partition.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Hyper-V Host CPU</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <master_item/>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>Hyper-V Network Adapter discover</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.host[discover,va]</key>
                    <delay>1h</delay>
                    <status>0</status>
                    <allowed_hosts/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <filter>
                        <evaltype>0</evaltype>
                        <formula/>
                        <conditions/>
                    </filter>
                    <lifetime>30d</lifetime>
                    <description/>
                    <item_prototypes>
                        <item_prototype>
                            <name>Hyper-V network adapter &quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; % Utilization</name>
                            <type>15</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>hyperv.hv.vswa.utilizationt[{#HYPERV_NETWORKADAPTER_INTERFACEINDEX}]</key>
                            <delay>15s</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>0</value_type>
                            <allowed_hosts/>
                            <units>%</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params>( (last(&quot;wmi.get[root\cimv2,select BytesTotalPersec from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}']&quot;) *8) /&#13;
last(&quot;wmi.get[root\cimv2,select CurrentBandwidth from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}']&quot;))*100</params>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host Network Adapter</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>Hyper-V network adapter &quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; Incoming Bytes/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select BytesReceivedPersec from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}']</key>
                            <delay>15s</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>Bps</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>Bytes Received/sec is the rate at which bytes are received over each network adapter, including framing characters. Network Interface\Bytes Received/sec is a subset of Network Interface\Bytes Total/sec.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host Network Adapter</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>Hyper-V network adapter &quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; Outbound Bytes/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select BytesSentPersec from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}']</key>
                            <delay>15s</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>Bps</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>perf_counter[&quot;\Network Interface()\Bytes Sent/sec&quot;]&#13;
Bytes Sent/sec is the rate at which bytes are sent over each network adapter, including framing characters. Network Interface\Bytes Sent/sec is a subset of Network Interface\Bytes Total/sec.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host Network Adapter</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>Hyper-V network adapter &quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; Total Bytes/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select BytesTotalPersec from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}']</key>
                            <delay>15s</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>bps</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>Bytes Total/sec is the rate at which bytes are sent and received over each network adapter, including framing characters. Network Interface\Bytes Total/sec is a sum of Network Interface\Bytes Received/sec and Network Interface\Bytes Sent/sec.'</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host Network Adapter</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>Hyper-V network adapter &quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; LinkSpeed</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select CurrentBandwidth from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}']</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>B</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>Bytes Received/sec is the rate at which bytes are received over each network adapter, including framing characters. Network Interface\Bytes Received/sec is a subset of Network Interface\Bytes Total/sec.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host Network Adapter</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>Hyper-V network adapter &quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; Output Queue Length</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select OutputQueueLength from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}']</key>
                            <delay>1m</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>perf_counter[&quot;\Network Interface()\Output Queue Length&quot;]&#13;
&#13;
“Output Queue Length is the length of the output packet queue (in packets). If this is longer than two, there are delays and the bottleneck should be found and eliminated, if possible. Since the requests are queued by the Network Driver Interface Specification (NDIS) in this implementation, this will always be 0.”&#13;
&#13;
https://blogs.technet.microsoft.com/yongrhee/2010/07/06/network-interface-output-queue-length-values-extremely-high/</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host Network Adapter</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>Hyper-V network adapter &quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; Packets Outbound Discarded</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select PacketsOutboundDiscarded from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}']</key>
                            <delay>1m</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>perf_counter[&quot;\Network Interface()\Packets Outbound Discarded&quot;]&#13;
&#13;
Shows the number of outbound packets to be discarded even though no errors had been detected to prevent transmission. One possible reason for discarding the a packet could be to free up buffer space.&#13;
&#13;
https://msdn.microsoft.com/en-us/library/ms803962.aspx</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host Network Adapter</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Template Microsoft Hyper-V Host:hyperv.hv.vswa.utilizationt[{#HYPERV_NETWORKADAPTER_INTERFACEINDEX}].avg(6h)}&gt;{$NETWORK_MAX_UTILIZE}</expression>
                            <recovery_mode>1</recovery_mode>
                            <recovery_expression>{Template Microsoft Hyper-V Host:hyperv.hv.vswa.utilizationt[{#HYPERV_NETWORKADAPTER_INTERFACEINDEX}].avg(6h)}&lt;{$HYPERV_NETWORK_MAX_UTILIZE}</recovery_expression>
                            <name>Hyper-V network adapter &quot;&quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; utilize &gt; {$HYPERV_NETWORK_MAX_UTILIZE}%</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>2</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>0</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2,select OutputQueueLength from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}'].last(#5)}&gt; {$HYPERV_NETWORK_OUTPUT_QUEUE_LENGHT}</expression>
                            <recovery_mode>0</recovery_mode>
                            <recovery_expression/>
                            <name>Hyper-V network adapter &quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; Output Queue Length &gt;  {$HYPERV_NETWORK_OUTPUT_QUEUE_LENGHT}</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>2</priority>
                            <description>Each Network Interface has an associated output queue. Output Queue Length measures how many outbound network packets are queued. Output Queue Length of 2 or more indicates serious Network Interface bottlenecks. &#13;
When reviewing Output Queue Length, it is important to review the active Network Interface utilized.</description>
                            <type>0</type>
                            <manual_close>0</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2,select PacketsOutboundDiscarded from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}'].last(#1)}&gt;{$HYPERV_NETWORK_OUTPUT_DISCARDED}</expression>
                            <recovery_mode>0</recovery_mode>
                            <recovery_expression/>
                            <name>Hyper-V network adapter &quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; Packets Outbound Discarded &gt; {$HYPERV_NETWORK_OUTPUT_DISCARDED}</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>1</priority>
                            <description>A healthy Server deployment should not be consistently discarding network packets on a managed network. The threshold means that packets are being discarded and the server administrator should be aware and understand why that is occurring. If the Network Interface is too busy, requests may not be getting processed quickly enough and become discarded. &#13;
It is important to note that these Performance Counters are total based. To get the value for review, you’ll need to subtract the maximum of the last sample from to the maximum of the first sample (we’ve done this for you in the Analysis and Definitions Workbook), leaving you with the delta of how many packets have been discarded during your data collection. If you see that the value is not zero, but is the same for average and max, it hasn’t moved in the dataset. Therefore, it could be contributed to a change in the environment that was expected (e.g. switch firmware ugrade) and be a non-issue.&#13;
Depending on the Network Interface manufacture, the receive and transmit buffers may be configurable. If they are, set them to an automatic setting. Should that not be an option, consider doubling the current value and re-evaluate.</description>
                            <type>0</type>
                            <manual_close>0</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Hyper-V network adapter &quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; % Utilization</name>
                            <width>900</width>
                            <height>200</height>
                            <yaxismin>0.0000</yaxismin>
                            <yaxismax>100.0000</yaxismax>
                            <show_work_period>1</show_work_period>
                            <show_triggers>1</show_triggers>
                            <type>0</type>
                            <show_legend>1</show_legend>
                            <show_3d>0</show_3d>
                            <percent_left>0.0000</percent_left>
                            <percent_right>0.0000</percent_right>
                            <ymin_type_1>0</ymin_type_1>
                            <ymax_type_1>0</ymax_type_1>
                            <ymin_item_1>0</ymin_item_1>
                            <ymax_item_1>0</ymax_item_1>
                            <graph_items>
                                <graph_item>
                                    <sortorder>0</sortorder>
                                    <drawtype>5</drawtype>
                                    <color>3333FF</color>
                                    <yaxisside>0</yaxisside>
                                    <calc_fnc>2</calc_fnc>
                                    <type>0</type>
                                    <item>
                                        <host>Template Microsoft Hyper-V Host</host>
                                        <key>hyperv.hv.vswa.utilizationt[{#HYPERV_NETWORKADAPTER_INTERFACEINDEX}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Hyper-V network adapter &quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; traffic</name>
                            <width>900</width>
                            <height>200</height>
                            <yaxismin>0.0000</yaxismin>
                            <yaxismax>100.0000</yaxismax>
                            <show_work_period>1</show_work_period>
                            <show_triggers>1</show_triggers>
                            <type>0</type>
                            <show_legend>1</show_legend>
                            <show_3d>0</show_3d>
                            <percent_left>0.0000</percent_left>
                            <percent_right>0.0000</percent_right>
                            <ymin_type_1>0</ymin_type_1>
                            <ymax_type_1>0</ymax_type_1>
                            <ymin_item_1>0</ymin_item_1>
                            <ymax_item_1>0</ymax_item_1>
                            <graph_items>
                                <graph_item>
                                    <sortorder>0</sortorder>
                                    <drawtype>5</drawtype>
                                    <color>33FF33</color>
                                    <yaxisside>0</yaxisside>
                                    <calc_fnc>2</calc_fnc>
                                    <type>0</type>
                                    <item>
                                        <host>Template Microsoft Hyper-V Host</host>
                                        <key>wmi.get[root\cimv2,select BytesReceivedPersec from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}']</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>5</drawtype>
                                    <color>3333FF</color>
                                    <yaxisside>0</yaxisside>
                                    <calc_fnc>2</calc_fnc>
                                    <type>0</type>
                                    <item>
                                        <host>Template Microsoft Hyper-V Host</host>
                                        <key>wmi.get[root\cimv2,select BytesSentPersec from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}']</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <drawtype>0</drawtype>
                                    <color>2774A4</color>
                                    <yaxisside>1</yaxisside>
                                    <calc_fnc>2</calc_fnc>
                                    <type>0</type>
                                    <item>
                                        <host>Template Microsoft Hyper-V Host</host>
                                        <key>wmi.get[root\cimv2,select OutputQueueLength from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}']</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>3</sortorder>
                                    <drawtype>0</drawtype>
                                    <color>FC6EA3</color>
                                    <yaxisside>1</yaxisside>
                                    <calc_fnc>2</calc_fnc>
                                    <type>0</type>
                                    <item>
                                        <host>Template Microsoft Hyper-V Host</host>
                                        <key>wmi.get[root\cimv2,select PacketsOutboundDiscarded from Win32_PerfFormattedData_Tcpip_NetworkAdapter where Name='{#HYPERV_NETWORKADAPTER_PERF}']</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <host_prototypes/>
                    <jmx_endpoint/>
                </discovery_rule>
                <discovery_rule>
                    <name>Hyper-V VM discover</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.host[discover,vm]</key>
                    <delay>1h</delay>
                    <status>0</status>
                    <allowed_hosts/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <filter>
                        <evaltype>0</evaltype>
                        <formula/>
                        <conditions/>
                    </filter>
                    <lifetime>30d</lifetime>
                    <description>Under constructions</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>VM &quot;{#VM_NAME}&quot; Average Memory Pressure</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2, select AveragePressure FROM Win32_PerfFormattedData_BalancerStats_HyperVDynamicMemoryVM WHERE Name='{#VM_NAME}']</key>
                            <delay>1m</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>%</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>This counter represents the average pressure in the VM. This displays the ratio of committed memory within the VM to the memory allocated to the virtual machine. This indicates whether the virtual machine has enough memory for its current needs, and values close to and over 100 indicate performance impacting page file use within the virtual machine.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host</name>
                                </application>
                                <application>
                                    <name>Hyper-V Host VM</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>VM &quot;{#VM_NAME}&quot; Physical Memory</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2, select PhysicalMemory  FROM Win32_PerfFormattedData_BalancerStats_HyperVDynamicMemoryVM WHERE Name='{#VM_NAME}']</key>
                            <delay>1m</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>B</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>This counter represents the current amount of memory in the VM.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host</name>
                                </application>
                                <application>
                                    <name>Hyper-V Host VM</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>1</type>
                                    <params>1048576</params>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2, select AveragePressure FROM Win32_PerfFormattedData_BalancerStats_HyperVDynamicMemoryVM WHERE Name='{#VM_NAME}'].avg(1m)}&gt;{$HYPERV_VM_AVERAGE_MEMORY_PREASURE}</expression>
                            <recovery_mode>1</recovery_mode>
                            <recovery_expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2, select AveragePressure FROM Win32_PerfFormattedData_BalancerStats_HyperVDynamicMemoryVM WHERE Name='{#VM_NAME}'].avg(5m)}&lt;{$HYPERV_VM_AVERAGE_MEMORY_PREASURE}</recovery_expression>
                            <name>VM Average Memory Pressure &gt; {$HYPERV_VM_AVERAGE_MEMORY_PREASURE}%</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>1</priority>
                            <description>Why: This displays the ratio of committed memory within the VM to the memory allocated to the virtual machine. This indicates whether the virtual machine has enough memory for its current needs, and values close to and over 100 indicate performance impacting page file use within the virtual machine. This value will be 0 if dynamic memory is disabled on Hyper-V 2012 R2 and earlier. &#13;
For virtual machines using dynamic memory, Hyper-V should maintain this at &quot;100 / (100 + (100 * Memory Buffer))&quot; (for default buffer for 20%, target pressure is 83.3%)&#13;
&#13;
What to do if threshold is breached:&#13;
Check each virtual machine's max memory settings (vs how much has been allocated to the virtual machine)&#13;
Check overall host available memory</description>
                            <type>0</type>
                            <manual_close>0</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <graph_prototypes/>
                    <host_prototypes/>
                    <jmx_endpoint/>
                </discovery_rule>
                <discovery_rule>
                    <name>Hyper-V VM network adapter discover</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.host[discover,vm_na]</key>
                    <delay>1h</delay>
                    <status>0</status>
                    <allowed_hosts/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <filter>
                        <evaltype>0</evaltype>
                        <formula/>
                        <conditions/>
                    </filter>
                    <lifetime>30d</lifetime>
                    <description/>
                    <item_prototypes>
                        <item_prototype>
                            <name>VM &quot;{#VM_NETWORKADAPTER_NAME}&quot; network adapter &quot;{#VM_NETWORKADAPTER_PERF}&quot; Incoming Bytes/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select BytesReceivedPersec from Win32_PerfFormattedData_NvspNicStats_HyperVVirtualNetworkAdapter where Name='{#VM_NETWORKADAPTER_PERF}']</key>
                            <delay>15s</delay>
                            <history>90d</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>Bps</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host VM</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>VM &quot;{#VM_NETWORKADAPTER_NAME}&quot; network adapter &quot;{#VM_NETWORKADAPTER_PERF}&quot; Outbound Bytes/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select BytesSentPersec from Win32_PerfFormattedData_NvspNicStats_HyperVVirtualNetworkAdapter where Name='{#VM_NETWORKADAPTER_PERF}']</key>
                            <delay>15s</delay>
                            <history>90d</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>Bps</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host VM</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes/>
                    <graph_prototypes/>
                    <host_prototypes/>
                    <jmx_endpoint/>
                </discovery_rule>
                <discovery_rule>
                    <name>Hyper-V VM storage device discover</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.host[discover,vm_sd]</key>
                    <delay>1h</delay>
                    <status>0</status>
                    <allowed_hosts/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <filter>
                        <evaltype>0</evaltype>
                        <formula/>
                        <conditions/>
                    </filter>
                    <lifetime>30d</lifetime>
                    <description>Discover VHDX and get perforamnce</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>VM &quot;{#VM_STORAGEDEVICE_NAME}&quot; storage device &quot;{#VM_STORAGEDEVICE_PERF}&quot; Queue Length</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select QueueLength  from Win32_PerfFormattedData_Counters_HyperVVirtualStorageDevice where Name='{#VM_STORAGEDEVICE_PERF}']</key>
                            <delay>15s</delay>
                            <history>90d</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>This counter represents the current queue length on this virtual device.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host VM</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>VM &quot;{#VM_STORAGEDEVICE_NAME}&quot; storage device &quot;{#VM_STORAGEDEVICE_PERF}&quot; Read Bytes/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select ReadBytesPersec from Win32_PerfFormattedData_Counters_HyperVVirtualStorageDevice where Name='{#VM_STORAGEDEVICE_PERF}']</key>
                            <delay>15s</delay>
                            <history>90d</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>Bps</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>This counter represents the total number of bytes that have been read per second on this virtual device</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host VM</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>VM &quot;{#VM_STORAGEDEVICE_NAME}&quot; storage device &quot;{#VM_STORAGEDEVICE_PERF}&quot; Read Operations/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select ReadOperationsPerSec from Win32_PerfFormattedData_Counters_HyperVVirtualStorageDevice where Name='{#VM_STORAGEDEVICE_PERF}']</key>
                            <delay>15s</delay>
                            <history>90d</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>ops/s</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>This counter represents the number of read operations that have occurred per second on this virtual device.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host VM</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>VM &quot;{#VM_STORAGEDEVICE_NAME}&quot; storage device &quot;{#VM_STORAGEDEVICE_PERF}&quot; Write Bytes/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select WriteBytesPersec from Win32_PerfFormattedData_Counters_HyperVVirtualStorageDevice where Name='{#VM_STORAGEDEVICE_PERF}']</key>
                            <delay>15s</delay>
                            <history>90d</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>Bps</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>This counter represents the total number of bytes that have been written per second on this virtual device.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host VM</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>VM &quot;{#VM_STORAGEDEVICE_NAME}&quot; storage device &quot;{#VM_STORAGEDEVICE_PERF}&quot; Write Operations/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2,select WriteOperationsPerSec from Win32_PerfFormattedData_Counters_HyperVVirtualStorageDevice where Name='{#VM_STORAGEDEVICE_PERF}']</key>
                            <delay>15s</delay>
                            <history>90d</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>ops/s</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>This counter represents the number of write operations that have occurred per second on this virtual device.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host VM</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes/>
                    <graph_prototypes/>
                    <host_prototypes/>
                    <jmx_endpoint/>
                </discovery_rule>
                <discovery_rule>
                    <name>Hyper-V Virtual Switch discover</name>
                    <type>7</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>hyperv.host[discover,vsw]</key>
                    <delay>1h</delay>
                    <status>0</status>
                    <allowed_hosts/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <filter>
                        <evaltype>0</evaltype>
                        <formula/>
                        <conditions/>
                    </filter>
                    <lifetime>30d</lifetime>
                    <description/>
                    <item_prototypes>
                        <item_prototype>
                            <name>Virtual Switch &quot;{#VIRTUAL_SWITCH_NAME}&quot; Total Bytes/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2, select BytesPersec FROM Win32_PerfFormattedData_NvspSwitchStats_HyperVVirtualSwitch WHERE Name='{#VIRTUAL_SWITCH_NAME}']</key>
                            <delay>15s</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>Bps</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>This counter represents the total number of bytes per second traversing the virtual switch.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host Virtual Switch</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>Virtual Switch &quot;{#VIRTUAL_SWITCH_NAME}&quot; Incoming Bytes/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2, select BytesReceivedPersec FROM Win32_PerfFormattedData_NvspSwitchStats_HyperVVirtualSwitch WHERE Name='{#VIRTUAL_SWITCH_NAME}']</key>
                            <delay>15s</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>Bps</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>This counter represents the total number of bytes received per second by the virtual switch.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host Virtual Switch</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>Virtual Switch &quot;{#VIRTUAL_SWITCH_NAME}&quot; Outbound Bytes/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2, select BytesSentPersec FROM Win32_PerfFormattedData_NvspSwitchStats_HyperVVirtualSwitch  WHERE Name='{#VIRTUAL_SWITCH_NAME}']</key>
                            <delay>15s</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units>Bps</units>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>This counter represents the total number of bytes sent per second by the virtual switch.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host Virtual Switch</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>Virtual Switch &quot;{#VIRTUAL_SWITCH_NAME}&quot; Dropped Incoming Packets/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2, select DroppedPacketsIncomingPersec FROM Win32_PerfFormattedData_NvspSwitchStats_HyperVVirtualSwitch WHERE Name='{#VIRTUAL_SWITCH_NAME}']</key>
                            <delay>15s</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>This counter represents the total number of packet dropped per second by the virtual switch in the incoming direction.</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host Virtual Switch</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                        <item_prototype>
                            <name>Virtual Switch &quot;{#VIRTUAL_SWITCH_NAME}&quot; Dropped Outgoing Packets/sec</name>
                            <type>7</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>wmi.get[root\cimv2, select DroppedPacketsOutgoingPersec FROM Win32_PerfFormattedData_NvspSwitchStats_HyperVVirtualSwitch WHERE Name='{#VIRTUAL_SWITCH_NAME}']</key>
                            <delay>15s</delay>
                            <history>1w</history>
                            <trends>365d</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description>This counter represents the total number of packet dropped per second by the virtual switch in the outgoing direction</description>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>Hyper-V Host Virtual Switch</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing/>
                            <jmx_endpoint/>
                            <application_prototypes/>
                            <master_item_prototype/>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes/>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Hyper-V Virtual switch &quot;{#VIRTUAL_SWITCH_NAME}&quot; traffic</name>
                            <width>900</width>
                            <height>200</height>
                            <yaxismin>0.0000</yaxismin>
                            <yaxismax>100.0000</yaxismax>
                            <show_work_period>1</show_work_period>
                            <show_triggers>1</show_triggers>
                            <type>0</type>
                            <show_legend>1</show_legend>
                            <show_3d>0</show_3d>
                            <percent_left>0.0000</percent_left>
                            <percent_right>0.0000</percent_right>
                            <ymin_type_1>0</ymin_type_1>
                            <ymax_type_1>0</ymax_type_1>
                            <ymin_item_1>0</ymin_item_1>
                            <ymax_item_1>0</ymax_item_1>
                            <graph_items>
                                <graph_item>
                                    <sortorder>0</sortorder>
                                    <drawtype>5</drawtype>
                                    <color>33FF33</color>
                                    <yaxisside>0</yaxisside>
                                    <calc_fnc>2</calc_fnc>
                                    <type>0</type>
                                    <item>
                                        <host>Template Microsoft Hyper-V Host</host>
                                        <key>wmi.get[root\cimv2, select BytesReceivedPersec FROM Win32_PerfFormattedData_NvspSwitchStats_HyperVVirtualSwitch WHERE Name='{#VIRTUAL_SWITCH_NAME}']</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>5</drawtype>
                                    <color>3333FF</color>
                                    <yaxisside>0</yaxisside>
                                    <calc_fnc>2</calc_fnc>
                                    <type>0</type>
                                    <item>
                                        <host>Template Microsoft Hyper-V Host</host>
                                        <key>wmi.get[root\cimv2, select BytesSentPersec FROM Win32_PerfFormattedData_NvspSwitchStats_HyperVVirtualSwitch  WHERE Name='{#VIRTUAL_SWITCH_NAME}']</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <drawtype>0</drawtype>
                                    <color>2774A4</color>
                                    <yaxisside>1</yaxisside>
                                    <calc_fnc>2</calc_fnc>
                                    <type>0</type>
                                    <item>
                                        <host>Template Microsoft Hyper-V Host</host>
                                        <key>wmi.get[root\cimv2, select DroppedPacketsIncomingPersec FROM Win32_PerfFormattedData_NvspSwitchStats_HyperVVirtualSwitch WHERE Name='{#VIRTUAL_SWITCH_NAME}']</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>3</sortorder>
                                    <drawtype>0</drawtype>
                                    <color>FC6EA3</color>
                                    <yaxisside>1</yaxisside>
                                    <calc_fnc>2</calc_fnc>
                                    <type>0</type>
                                    <item>
                                        <host>Template Microsoft Hyper-V Host</host>
                                        <key>wmi.get[root\cimv2, select DroppedPacketsOutgoingPersec FROM Win32_PerfFormattedData_NvspSwitchStats_HyperVVirtualSwitch WHERE Name='{#VIRTUAL_SWITCH_NAME}']</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <host_prototypes/>
                    <jmx_endpoint/>
                </discovery_rule>
            </discovery_rules>
            <httptests/>
            <macros>
                <macro>
                    <macro>{$HYPERV_LP_CONTEXT_SWITCHES}</macro>
                    <value>20000</value>
                </macro>
                <macro>
                    <macro>{$HYPERV_LP_TOTAL_RUNTIME}</macro>
                    <value>50</value>
                </macro>
                <macro>
                    <macro>{$HYPERV_MEMORY_MIN_AVAILABLE}</macro>
                    <value>2G</value>
                </macro>
                <macro>
                    <macro>{$HYPERV_NETWORK_MAX_UTILIZE}</macro>
                    <value>80</value>
                </macro>
                <macro>
                    <macro>{$HYPERV_NETWORK_OUTPUT_DISCARDED}</macro>
                    <value>100</value>
                </macro>
                <macro>
                    <macro>{$HYPERV_NETWORK_OUTPUT_QUEUE_LENGHT}</macro>
                    <value>2</value>
                </macro>
                <macro>
                    <macro>{$HYPERV_RVP_GUEST_RUNTIME}</macro>
                    <value>5</value>
                </macro>
                <macro>
                    <macro>{$HYPERV_VL_CPU_RATIO}</macro>
                    <value>8</value>
                </macro>
                <macro>
                    <macro>{$HYPERV_VM_AVERAGE_MEMORY_PREASURE}</macro>
                    <value>85</value>
                </macro>
            </macros>
            <templates/>
            <screens>
                <screen>
                    <name>Hyper-V Host Overview</name>
                    <hsize>2</hsize>
                    <vsize>4</vsize>
                    <screen_items>
                        <screen_item>
                            <resourcetype>0</resourcetype>
                            <width>500</width>
                            <height>100</height>
                            <x>0</x>
                            <y>0</y>
                            <colspan>1</colspan>
                            <rowspan>1</rowspan>
                            <elements>0</elements>
                            <valign>0</valign>
                            <halign>0</halign>
                            <style>0</style>
                            <url/>
                            <dynamic>0</dynamic>
                            <sort_triggers>0</sort_triggers>
                            <resource>
                                <name>Hyper-V Logical CPU perf</name>
                                <host>Template Microsoft Hyper-V Host</host>
                            </resource>
                            <max_columns>3</max_columns>
                            <application/>
                        </screen_item>
                        <screen_item>
                            <resourcetype>0</resourcetype>
                            <width>500</width>
                            <height>100</height>
                            <x>1</x>
                            <y>0</y>
                            <colspan>1</colspan>
                            <rowspan>1</rowspan>
                            <elements>0</elements>
                            <valign>0</valign>
                            <halign>0</halign>
                            <style>0</style>
                            <url/>
                            <dynamic>0</dynamic>
                            <sort_triggers>0</sort_triggers>
                            <resource>
                                <name>Hyper-V Virtual CPU (VMs) perf</name>
                                <host>Template Microsoft Hyper-V Host</host>
                            </resource>
                            <max_columns>3</max_columns>
                            <application/>
                        </screen_item>
                        <screen_item>
                            <resourcetype>0</resourcetype>
                            <width>500</width>
                            <height>100</height>
                            <x>0</x>
                            <y>1</y>
                            <colspan>1</colspan>
                            <rowspan>1</rowspan>
                            <elements>0</elements>
                            <valign>0</valign>
                            <halign>0</halign>
                            <style>0</style>
                            <url/>
                            <dynamic>0</dynamic>
                            <sort_triggers>0</sort_triggers>
                            <resource>
                                <name>Hyper-V Host Memory used</name>
                                <host>Template Microsoft Hyper-V Host</host>
                            </resource>
                            <max_columns>3</max_columns>
                            <application/>
                        </screen_item>
                        <screen_item>
                            <resourcetype>0</resourcetype>
                            <width>500</width>
                            <height>100</height>
                            <x>1</x>
                            <y>1</y>
                            <colspan>1</colspan>
                            <rowspan>1</rowspan>
                            <elements>0</elements>
                            <valign>0</valign>
                            <halign>0</halign>
                            <style>0</style>
                            <url/>
                            <dynamic>0</dynamic>
                            <sort_triggers>0</sort_triggers>
                            <resource>
                                <name>Hyper-V VMs Memory used</name>
                                <host>Template Microsoft Hyper-V Host</host>
                            </resource>
                            <max_columns>3</max_columns>
                            <application/>
                        </screen_item>
                        <screen_item>
                            <resourcetype>20</resourcetype>
                            <width>500</width>
                            <height>100</height>
                            <x>0</x>
                            <y>2</y>
                            <colspan>2</colspan>
                            <rowspan>1</rowspan>
                            <elements>0</elements>
                            <valign>0</valign>
                            <halign>0</halign>
                            <style>0</style>
                            <url/>
                            <dynamic>0</dynamic>
                            <sort_triggers>0</sort_triggers>
                            <resource>
                                <name>Hyper-V network adapter &quot;{#HYPERV_NETWORKADAPTER_NAME}&quot; traffic</name>
                                <host>Template Microsoft Hyper-V Host</host>
                            </resource>
                            <max_columns>3</max_columns>
                            <application/>
                        </screen_item>
                        <screen_item>
                            <resourcetype>20</resourcetype>
                            <width>500</width>
                            <height>100</height>
                            <x>0</x>
                            <y>3</y>
                            <colspan>2</colspan>
                            <rowspan>1</rowspan>
                            <elements>0</elements>
                            <valign>0</valign>
                            <halign>0</halign>
                            <style>0</style>
                            <url/>
                            <dynamic>0</dynamic>
                            <sort_triggers>0</sort_triggers>
                            <resource>
                                <name>Hyper-V Virtual switch &quot;{#VIRTUAL_SWITCH_NAME}&quot; traffic</name>
                                <host>Template Microsoft Hyper-V Host</host>
                            </resource>
                            <max_columns>3</max_columns>
                            <application/>
                        </screen_item>
                    </screen_items>
                </screen>
            </screens>
        </template>
    </templates>
    <triggers>
        <trigger>
            <expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2, select AvailableMemory FROM Win32_PerfFormattedData_BalancerStats_HyperVDynamicMemoryBalancer].avg(15m)}&lt;{$HYPERV_MEMORY_MIN_AVAILABLE}</expression>
            <recovery_mode>0</recovery_mode>
            <recovery_expression/>
            <name>Hyper-V Dynamic Memory Balancer Available Memory &lt; {$HYPERV_MEMORY_MIN_AVAILABLE}</name>
            <correlation_mode>0</correlation_mode>
            <correlation_tag/>
            <url/>
            <status>0</status>
            <priority>1</priority>
            <description/>
            <type>0</type>
            <manual_close>1</manual_close>
            <dependencies/>
            <tags/>
        </trigger>
        <trigger>
            <expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2, select HealthOk FROM Win32_PerfFormattedData_VmmsVirtualMachineStats_HyperVVirtualMachineHealthSummary].last()}=0</expression>
            <recovery_mode>0</recovery_mode>
            <recovery_expression/>
            <name>Hyper-V host has 0 VMs in OK state</name>
            <correlation_mode>0</correlation_mode>
            <correlation_tag/>
            <url/>
            <status>0</status>
            <priority>3</priority>
            <description/>
            <type>0</type>
            <manual_close>0</manual_close>
            <dependencies/>
            <tags/>
        </trigger>
        <trigger>
            <expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2, select HealthCritical FROM Win32_PerfFormattedData_VmmsVirtualMachineStats_HyperVVirtualMachineHealthSummary].last()}&gt;0</expression>
            <recovery_mode>1</recovery_mode>
            <recovery_expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2, select HealthCritical FROM Win32_PerfFormattedData_VmmsVirtualMachineStats_HyperVVirtualMachineHealthSummary].last()}=0</recovery_expression>
            <name>Hyper-V host has critical VMs</name>
            <correlation_mode>0</correlation_mode>
            <correlation_tag/>
            <url/>
            <status>0</status>
            <priority>3</priority>
            <description>The number of VMs running in a critical state.</description>
            <type>0</type>
            <manual_close>0</manual_close>
            <dependencies/>
            <tags/>
        </trigger>
        <trigger>
            <expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2, select ContextSwitchesPersec FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorLogicalProcessor].avg(5m)}&gt;{$HYPERV_LP_CONTEXT_SWITCHES}</expression>
            <recovery_mode>1</recovery_mode>
            <recovery_expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2, select ContextSwitchesPersec FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorLogicalProcessor].avg(15m)}&lt;{$HYPERV_LP_CONTEXT_SWITCHES}</recovery_expression>
            <name>Hyper-V Hypervisor Logical Processor Context Switches/sec &gt; {$HYPERV_LP_CONTEXT_SWITCHES}</name>
            <correlation_mode>0</correlation_mode>
            <correlation_tag/>
            <url>https://blogs.technet.microsoft.com/neales/2016/10/24/hyper-v-performance-cpu/</url>
            <status>0</status>
            <priority>2</priority>
            <description>Why: We use this as a general health &amp; performance indicator for the host &amp; virtual machines. This counter must be used in context with all other activity based counters (CPU, Disk &amp; Network, latency &amp; throughput).&#13;
&#13;
What to do if threshold is exceeded:&#13;
Check VM config (particularly remove / disable any active &amp; busy emulated devices)&#13;
Check that the VM is using the correct version of the integration components.&#13;
Check host operating system utilization Root VP CPU usage (host OS utilization) - see the &quot;Hyper-V Hypervisor Root Virtual Processor&quot; counter section for the specifics.&#13;
Check drivers - particularly network and storage drivers, but other too.&#13;
Check for significant inconsistency across your hosts - it can indicate significant configuration or load differences.</description>
            <type>0</type>
            <manual_close>0</manual_close>
            <dependencies/>
            <tags/>
        </trigger>
        <trigger>
            <expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2, select PercentTotalRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorLogicalProcessor WHERE Name='_Total'].avg(5)}&gt;{$HYPERV_LP_TOTAL_RUNTIME}</expression>
            <recovery_mode>1</recovery_mode>
            <recovery_expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2, select PercentTotalRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorLogicalProcessor WHERE Name='_Total'].avg(15)}&lt;{$HYPERV_LP_TOTAL_RUNTIME}</recovery_expression>
            <name>Hyper-V Hypervisor Logical Processor Total RunTime &gt; {$HYPERV_LP_TOTAL_RUNTIME}%</name>
            <correlation_mode>0</correlation_mode>
            <correlation_tag/>
            <url>https://blogs.technet.microsoft.com/neales/2016/10/24/hyper-v-performance-cpu/</url>
            <status>0</status>
            <priority>2</priority>
            <description>If _Total meets this, identify sources of CPU load (sounds obvious but.. )&#13;
&#13;
If single / small % of CPUs consistently affected, especially (but not necessarily) CPU 0 look for VMQ / RSS config issues, or other hardware issue.&#13;
&#13;
If a small number of CPUs are impacted, but the busy CPU does vary, then check the two &quot;% Guest Run Time&quot; processor counters below</description>
            <type>0</type>
            <manual_close>0</manual_close>
            <dependencies/>
            <tags/>
        </trigger>
        <trigger>
            <expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2, select PercentGuestRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorRootVirtualProcessor WHERE Name='_Total'].avg(5m)}&gt;{$HYPERV_RVP_GUEST_RUNTIME}</expression>
            <recovery_mode>1</recovery_mode>
            <recovery_expression>{Template Microsoft Hyper-V Host:wmi.get[root\cimv2, select PercentGuestRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorRootVirtualProcessor WHERE Name='_Total'].avg(15m)}&lt;{$HYPERV_RVP_GUEST_RUNTIME}</recovery_expression>
            <name>Hyper-V Hypervisor Root Virtual Processor Guest RunTime &gt; {$HYPERV_RVP_GUEST_RUNTIME}%</name>
            <correlation_mode>0</correlation_mode>
            <correlation_tag/>
            <url>https://blogs.technet.microsoft.com/neales/2016/10/24/hyper-v-performance-cpu/</url>
            <status>0</status>
            <priority>2</priority>
            <description>Why: The host OS doesn't compete for CPU time in Hyper-V. It always immediately gets any CPU time it needs, which is necessary to provide great performance for virtual machines. This means any unnecessary CPU usage in the host OS can have a significant negative performance impact on all virtual machines - which is why the guidance is to install as little as possible on the host OS (absolute minimum of agents, services &amp; applications).&#13;
&#13;
What to do if threshold is exceeded:&#13;
Check for any non-default OS running services / agents / processes in this OS, and review if they are really necessary.&#13;
Check VMQ/RSS configuration (if 10GB NICs are in use) and for bad drivers - especially if this the CPU usage is focused on a small percentage of the hosts OS's VPs.&#13;
Standard CPU performance troubleshooting - as if it was a physical machine.&#13;
For general administration, use remote management tools instead of locally or via RDP on the host.</description>
            <type>0</type>
            <manual_close>0</manual_close>
            <dependencies/>
            <tags/>
        </trigger>
        <trigger>
            <expression>{Template Microsoft Hyper-V Host:service_state[vmms].min(#3)}&lt;&gt;0</expression>
            <recovery_mode>0</recovery_mode>
            <recovery_expression/>
            <name>Hyper-V Virtual Machine Management service is not running</name>
            <correlation_mode>0</correlation_mode>
            <correlation_tag/>
            <url/>
            <status>0</status>
            <priority>4</priority>
            <description/>
            <type>0</type>
            <manual_close>0</manual_close>
            <dependencies/>
            <tags/>
        </trigger>
        <trigger>
            <expression>{Template Microsoft Hyper-V Host:hyperv.hv.vcpuratio.last()}&gt;{$HYPERV_VL_CPU_RATIO}</expression>
            <recovery_mode>0</recovery_mode>
            <recovery_expression/>
            <name>Hyper-V Virtual to Logical CPU Ratio &gt; {$HYPERV_VL_CPU_RATIO}:1</name>
            <correlation_mode>0</correlation_mode>
            <correlation_tag/>
            <url/>
            <status>0</status>
            <priority>1</priority>
            <description/>
            <type>0</type>
            <manual_close>1</manual_close>
            <dependencies/>
            <tags/>
        </trigger>
        <trigger>
            <expression>{Template Microsoft Hyper-V Host:hyperv.hv.stat.vmsstatepaused.last()}&gt;{Template Microsoft Hyper-V Host:hyperv.hv.stat.vmsstatepaused.last(#2)} and {Template Microsoft Hyper-V Host:hyperv.hv.stat.vmsstatepaused.last(#2)}&gt;{Template Microsoft Hyper-V Host:hyperv.hv.stat.vmsstatepaused.last(#3)}</expression>
            <recovery_mode>0</recovery_mode>
            <recovery_expression/>
            <name>{ITEM.LASTVALUE1} VMs changed state to Paused</name>
            <correlation_mode>0</correlation_mode>
            <correlation_tag/>
            <url/>
            <status>0</status>
            <priority>2</priority>
            <description/>
            <type>0</type>
            <manual_close>0</manual_close>
            <dependencies/>
            <tags/>
        </trigger>
    </triggers>
    <graphs>
        <graph>
            <name>Hyper-V Host Memory used</name>
            <width>900</width>
            <height>200</height>
            <yaxismin>0.0000</yaxismin>
            <yaxismax>100.0000</yaxismax>
            <show_work_period>0</show_work_period>
            <show_triggers>0</show_triggers>
            <type>1</type>
            <show_legend>1</show_legend>
            <show_3d>0</show_3d>
            <percent_left>0.0000</percent_left>
            <percent_right>0.0000</percent_right>
            <ymin_type_1>0</ymin_type_1>
            <ymax_type_1>2</ymax_type_1>
            <ymin_item_1>0</ymin_item_1>
            <ymax_item_1>
                <host>Template Microsoft Hyper-V Host</host>
                <key>hyperv.hv.TotalPhysicalMemory</key>
            </ymax_item_1>
            <graph_items>
                <graph_item>
                    <sortorder>0</sortorder>
                    <drawtype>5</drawtype>
                    <color>DDDD00</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>hyperv.hv.rootassignedmemory</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <drawtype>5</drawtype>
                    <color>F63100</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>hyperv.hv.vmsassignedmemory</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <drawtype>0</drawtype>
                    <color>33FF33</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>wmi.get[root\cimv2, select AvailableMemory FROM Win32_PerfFormattedData_BalancerStats_HyperVDynamicMemoryBalancer]</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <name>Hyper-V Logical CPU perf</name>
            <width>900</width>
            <height>200</height>
            <yaxismin>0.0000</yaxismin>
            <yaxismax>100.0000</yaxismax>
            <show_work_period>1</show_work_period>
            <show_triggers>1</show_triggers>
            <type>0</type>
            <show_legend>1</show_legend>
            <show_3d>0</show_3d>
            <percent_left>0.0000</percent_left>
            <percent_right>0.0000</percent_right>
            <ymin_type_1>0</ymin_type_1>
            <ymax_type_1>0</ymax_type_1>
            <ymin_item_1>0</ymin_item_1>
            <ymax_item_1>0</ymax_item_1>
            <graph_items>
                <graph_item>
                    <sortorder>0</sortorder>
                    <drawtype>5</drawtype>
                    <color>FF3333</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>wmi.get[root\cimv2, select PercentTotalRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorLogicalProcessor WHERE Name='_Total']</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <drawtype>5</drawtype>
                    <color>33FF33</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>wmi.get[root\cimv2, select PercentGuestRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorLogicalProcessor WHERE Name='_Total']</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <drawtype>0</drawtype>
                    <color>3333FF</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>wmi.get[root\cimv2, select PercentHypervisorRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorLogicalProcessor WHERE Name='_Total']</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <name>Hyper-V Root CPU (Host) perf</name>
            <width>900</width>
            <height>200</height>
            <yaxismin>0.0000</yaxismin>
            <yaxismax>100.0000</yaxismax>
            <show_work_period>1</show_work_period>
            <show_triggers>1</show_triggers>
            <type>0</type>
            <show_legend>1</show_legend>
            <show_3d>0</show_3d>
            <percent_left>0.0000</percent_left>
            <percent_right>0.0000</percent_right>
            <ymin_type_1>0</ymin_type_1>
            <ymax_type_1>0</ymax_type_1>
            <ymin_item_1>0</ymin_item_1>
            <ymax_item_1>0</ymax_item_1>
            <graph_items>
                <graph_item>
                    <sortorder>0</sortorder>
                    <drawtype>5</drawtype>
                    <color>3333FF</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>wmi.get[root\cimv2, select PercentGuestRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorRootVirtualProcessor WHERE Name='_Total']</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <drawtype>0</drawtype>
                    <color>33FF33</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>wmi.get[root\cimv2, select PercentHypervisorRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorRootVirtualProcessor WHERE Name='_Total']</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <drawtype>0</drawtype>
                    <color>FF3333</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>wmi.get[root\cimv2, select PercentRemoteRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorRootVirtualProcessor WHERE Name='_Total']</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <name>Hyper-V Virtual CPU (VMs) perf</name>
            <width>900</width>
            <height>200</height>
            <yaxismin>0.0000</yaxismin>
            <yaxismax>100.0000</yaxismax>
            <show_work_period>1</show_work_period>
            <show_triggers>1</show_triggers>
            <type>0</type>
            <show_legend>1</show_legend>
            <show_3d>0</show_3d>
            <percent_left>0.0000</percent_left>
            <percent_right>0.0000</percent_right>
            <ymin_type_1>0</ymin_type_1>
            <ymax_type_1>0</ymax_type_1>
            <ymin_item_1>0</ymin_item_1>
            <ymax_item_1>0</ymax_item_1>
            <graph_items>
                <graph_item>
                    <sortorder>0</sortorder>
                    <drawtype>5</drawtype>
                    <color>3333FF</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>wmi.get[root\cimv2, select PercentGuestRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorVirtualProcessor WHERE Name='_Total']</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <drawtype>0</drawtype>
                    <color>33FF33</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>wmi.get[root\cimv2, select PercentHypervisorRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorVirtualProcessor WHERE Name='_Total']</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <drawtype>0</drawtype>
                    <color>FF3333</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>wmi.get[root\cimv2, select PercentRemoteRunTime FROM Win32_PerfFormattedData_HvStats_HyperVHypervisorVirtualProcessor WHERE Name='_Total']</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <name>Hyper-V VMs Memory used</name>
            <width>900</width>
            <height>200</height>
            <yaxismin>0.0000</yaxismin>
            <yaxismax>100.0000</yaxismax>
            <show_work_period>0</show_work_period>
            <show_triggers>0</show_triggers>
            <type>0</type>
            <show_legend>1</show_legend>
            <show_3d>0</show_3d>
            <percent_left>0.0000</percent_left>
            <percent_right>0.0000</percent_right>
            <ymin_type_1>0</ymin_type_1>
            <ymax_type_1>2</ymax_type_1>
            <ymin_item_1>0</ymin_item_1>
            <ymax_item_1>
                <host>Template Microsoft Hyper-V Host</host>
                <key>hyperv.hv.TotalPhysicalMemory</key>
            </ymax_item_1>
            <graph_items>
                <graph_item>
                    <sortorder>0</sortorder>
                    <drawtype>0</drawtype>
                    <color>F63100</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>hyperv.hv.vmsassignedmemory</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <drawtype>4</drawtype>
                    <color>A54F10</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>hyperv.hv.stat.vmsmemorydemand</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <drawtype>4</drawtype>
                    <color>33FFFF</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>hyperv.hv.stat.vmsmemorymaximum</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>3</sortorder>
                    <drawtype>0</drawtype>
                    <color>6C59DC</color>
                    <yaxisside>0</yaxisside>
                    <calc_fnc>2</calc_fnc>
                    <type>0</type>
                    <item>
                        <host>Template Microsoft Hyper-V Host</host>
                        <key>hyperv.hv.stat.vmsmemoryminimum</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
    </graphs>
    <value_maps>
        <value_map>
            <name>Windows service state</name>
            <mappings>
                <mapping>
                    <value>0</value>
                    <newvalue>Running</newvalue>
                </mapping>
                <mapping>
                    <value>1</value>
                    <newvalue>Paused</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>Start pending</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>Pause pending</newvalue>
                </mapping>
                <mapping>
                    <value>4</value>
                    <newvalue>Continue pending</newvalue>
                </mapping>
                <mapping>
                    <value>5</value>
                    <newvalue>Stop pending</newvalue>
                </mapping>
                <mapping>
                    <value>6</value>
                    <newvalue>Stopped</newvalue>
                </mapping>
                <mapping>
                    <value>7</value>
                    <newvalue>Unknown</newvalue>
                </mapping>
                <mapping>
                    <value>255</value>
                    <newvalue>No such service</newvalue>
                </mapping>
            </mappings>
        </value_map>
    </value_maps>
</zabbix_export>
